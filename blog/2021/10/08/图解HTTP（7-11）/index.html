<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="HTTP,">





  <link rel="alternate" href="/atom.xml" title="Zxy's blog" type="application/atom+xml">






<meta name="description" content="图解HTTP（7-11）">
<meta name="keywords" content="HTTP">
<meta property="og:type" content="article">
<meta property="og:title" content="图解HTTP（7-11）">
<meta property="og:url" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/index.html">
<meta property="og:site_name" content="Zxy&#39;s blog">
<meta property="og:description" content="图解HTTP（7-11）">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/使用HTTPS通信.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/HTTP-HTTPS.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/混合加密机制.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/SSL流程.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/Session管理及Cookie状态管理.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/从前的HTTP.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/SPDY.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/websocket1.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/websocket2.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/HTTP2.0特点.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/CGI.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/JSON.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/主动攻击.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/被动攻击.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/被动攻击2.png">
<meta property="og:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/验证数据的几个位置.png">
<meta property="og:updated_time" content="2021-10-08T02:09:57.136Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="图解HTTP（7-11）">
<meta name="twitter:description" content="图解HTTP（7-11）">
<meta name="twitter:image" content="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/使用HTTPS通信.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/">





  <title>图解HTTP（7-11） | Zxy's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zxy's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">工欲善其事，必先利其器</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.xingyuzhao.ltd/blog/2021/10/08/图解HTTP（7-11）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zxy">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zxy's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">图解HTTP（7-11）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-10-08T09:38:49+08:00">
                2021-10-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2021/10/08/图解HTTP（7-11）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/blog/2021/10/08/图解HTTP（7-11）/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  25 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>图解HTTP（7-11）</p>
<a id="more"></a>

<h3 id="第-7-章-确保-Web-安全的-HTTPS"><a href="#第-7-章-确保-Web-安全的-HTTPS" class="headerlink" title="第 7 章 确保 Web 安全的 HTTPS"></a>第 7 章 确保 Web 安全的 HTTPS</h3><h4 id="7-1-HTTP-的缺点"><a href="#7-1-HTTP-的缺点" class="headerlink" title="7.1 HTTP 的缺点"></a>7.1 HTTP 的缺点</h4><ul>
<li>通信使用明文，内容可能会被窃听</li>
<li>不验证通信方的身份，因此有可能遭遇伪装</li>
<li>无法证明报文的完整性，所以有可能已遭篡改</li>
</ul>
<h5 id="7-1-1-通信使用明文可能会被窃听"><a href="#7-1-1-通信使用明文可能会被窃听" class="headerlink" title="7.1.1 通信使用明文可能会被窃听"></a>7.1.1 通信使用明文可能会被窃听</h5><ul>
<li><p>TCP/IP 是可能被窃听的网络</p>
</li>
<li><p>加密处理防止被窃听</p>
<ul>
<li>SSL（Secure Socket Layer，安全套接层）</li>
<li>TLC（Transport Layer Security，安全层传输协议）</li>
</ul>
<p>与 SSL 组合使用的 HTTP 被称为 HTTPS（HTTP Secure，超文本传输安全协议）或 HTTP over SSL。</p>
</li>
<li><p>内容的加密，内容有被窜改的风险</p>
</li>
</ul>
<h5 id="7-1-2-不验证通信方的身份就可能遭遇伪装"><a href="#7-1-2-不验证通信方的身份就可能遭遇伪装" class="headerlink" title="7.1.2 不验证通信方的身份就可能遭遇伪装"></a>7.1.2 不验证通信方的身份就可能遭遇伪装</h5><ul>
<li>任何人都可发起请求，DOS 攻击</li>
<li>查明对手的证书<ul>
<li>虽然使用 HTTP 协议无法确定通信方，但使用 SSL 可以。SSL 不仅提供加密处理，而且还使用了一种被称为证书的手段，可用于确定方。</li>
</ul>
</li>
</ul>
<h5 id="7-1-3-无法证明报文完整性，可能已遭篡改"><a href="#7-1-3-无法证明报文完整性，可能已遭篡改" class="headerlink" title="7.1.3 无法证明报文完整性，可能已遭篡改"></a>7.1.3 无法证明报文完整性，可能已遭篡改</h5><ul>
<li>接收到的内容可能有误。请求或响应在传输途中，遭攻击者拦截并篡改内容的攻击称为中间人攻击（Man-in-the-Middle attack，MITM）</li>
<li>如何防止篡改。使用 HTTPS。</li>
</ul>
<h4 id="7-2-HTTP-加密-认证-完整性保护-HTTPS"><a href="#7-2-HTTP-加密-认证-完整性保护-HTTPS" class="headerlink" title="7.2 HTTP+加密+认证+完整性保护=HTTPS"></a>7.2 HTTP+加密+认证+完整性保护=HTTPS</h4><h5 id="7-2-1-HTTP-加上加密处理和认证以及完整性保护后即是-HTTPS"><a href="#7-2-1-HTTP-加上加密处理和认证以及完整性保护后即是-HTTPS" class="headerlink" title="7.2.1 HTTP 加上加密处理和认证以及完整性保护后即是 HTTPS"></a>7.2.1 HTTP 加上加密处理和认证以及完整性保护后即是 HTTPS</h5><p>我们把添加了加密及认证机制的 HTTP 称为 HTTPS（HTTP Secure）。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/使用HTTPS通信.png">

<h5 id="7-2-2-HTTPS-是身披-SSL-外壳的-HTTP"><a href="#7-2-2-HTTPS-是身披-SSL-外壳的-HTTP" class="headerlink" title="7.2.2 HTTPS 是身披 SSL 外壳的 HTTP"></a>7.2.2 HTTPS 是身披 SSL 外壳的 HTTP</h5><p>HTTPS 并非是应用层的一种新协议。只是 HTTP 通信接口部分用 SSL（Secure Socket Layer）和 TLS（Transport Layer Security）协议代替而已。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/HTTP-HTTPS.png">

<p>在采用 SSL 后，HTTP 就拥有了 HTTPS 的加密、证书和完整性保护这些功能。</p>
<ul>
<li>SSL是独立于 HTTP 的协议，所以不光是 HTTP 协议，其他运行在应用层的 SMTP 和 Telnet 等协议均可配合 SSL协议使用。可以说 SSL是当今世界上应用最为广泛的网络安全技术。</li>
</ul>
<h5 id="7-2-3-相互交换密钥的公开密钥加密技术"><a href="#7-2-3-相互交换密钥的公开密钥加密技术" class="headerlink" title="7.2.3 相互交换密钥的公开密钥加密技术"></a>7.2.3 相互交换密钥的公开密钥加密技术</h5><p>SSL 采用一种叫做公开密钥加密（Public-key cryptography）的加密处理方式。</p>
<p>近代加密方法中<strong>加密算法</strong>是<strong>公开</strong>的，而<strong>密钥</strong>却是保密的，通过这种方式得以保持加密方法的安全性。</p>
<p>加密和解密都会用到密钥，任何持有密钥的人都可以解密，如果被攻击者获得，则加密失去意义。</p>
<ul>
<li><p><strong>共享密钥加密</strong>的困境</p>
<ul>
<li>加密和解密同用一个密钥的方式称为共享密钥加密，也被叫做对称密钥加密。发送密钥就有被窃听的风险，但不发送，对方就不能解密。再说，密钥若能够安全发送，那数据也应该能安全到达。</li>
</ul>
</li>
<li><p>使用<strong>两把</strong>密钥的<strong>公开密钥加密</strong>，很好的解决了共享密钥加密的困难</p>
<ul>
<li>公开密钥加密使用一对非对称的密钥，一把叫做私有密钥（private key），另一把叫做公开密钥（public key）。私钥不能让其他人知道，而公钥任何人都可以获得。</li>
<li>使用公开密钥加密方式，发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密。利用这种方式，不需要发送用来解密的私有密钥，也不必担心密钥被攻击者窃听而盗走。</li>
</ul>
</li>
<li><p>HTTPS 采用<strong>混合加密机制</strong></p>
<ul>
<li>在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式。</li>
</ul>
<img src="/blog/2021/10/08/图解HTTP（7-11）/混合加密机制.png">

</li>
</ul>
<h5 id="7-2-4-证明公开密钥正确性的证书"><a href="#7-2-4-证明公开密钥正确性的证书" class="headerlink" title="7.2.4 证明公开密钥正确性的证书"></a>7.2.4 证明公开密钥正确性的证书</h5><p>公开密钥加密方式还是存在一些问题的。那就是无法证明<strong>公开密钥本身就是货真价实的公开密钥。</strong></p>
<p>为了解决上述问题，可以使用由<strong>数字证书认证机构</strong>（CA，Certificate Authority）和其相关机关颁发的公开密钥证书。</p>
<p><strong>流程</strong></p>
<p>首先，服务器的运营人员向数字证书认证机构提出公开密钥的申请。数字证书认证机构在判明提出申请者的身份之后，会对已申请的公开密钥做数字签名，然后将已签名的公开密钥分配，并将该公开密钥放入公钥证书后绑定在一起。</p>
<p>多数浏览器开发商发布版本时，会事先在内部植入常用认证机关的公开密钥。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/SSL流程.png">

<ul>
<li>可证明组织真实性的 EV SSL 证书<ol>
<li>证明作为通信一方的服务器是否规范</li>
<li>确认服务器背后运营的企业是否真实存在</li>
</ol>
</li>
<li>用来确认客户端的客户端证书</li>
<li>认证机构信誉第一，SSL 机制中介入认证机构之所以可行，是因为建立在其信用绝对可靠这一大前提下的。</li>
<li>由自认证机构办法的证书称为自签名证书，浏览器访问该服务器时，会显示“无法确认连接安全性”或“该网站的安全证书存在问题”等警告消息。</li>
</ul>
<h5 id="7-2-5-HTTPS-的安全通信机制"><a href="#7-2-5-HTTPS-的安全通信机制" class="headerlink" title="7.2.5 HTTPS 的安全通信机制"></a>7.2.5 HTTPS 的安全通信机制</h5><ul>
<li><p>SSL 和 TLS，HTTPS 使用 SSL（Secure Socket Layer） 和 TLS（Transport Layer Security）这两个协议。</p>
<ul>
<li>SSL 技术起初由网景开发，直到 SSL3.0，后转移至 IETF 手中；</li>
<li>IETF 以 SSL3.0 为基准，制定了 TLS1.0、TLS1.1 和 TLS1.2。有时候统称该协议为 SSL；</li>
<li>当前主流版本为 SSL3.0 和 TLS1.0。</li>
</ul>
</li>
<li><p>SSL 速度慢吗？</p>
<ul>
<li>HTTPS 比 HTTP 慢 2 到 100倍</li>
</ul>
</li>
</ul>
<h3 id="第-8-章-确认访问用户身份的认证"><a href="#第-8-章-确认访问用户身份的认证" class="headerlink" title="第 8 章 确认访问用户身份的认证"></a>第 8 章 确认访问用户身份的认证</h3><p>某些 Web 页面只想让特定的人浏览，或者干脆仅本人可见。为达到这个目标，必不可少的就是认证功能。</p>
<h4 id="8-1-何为认证"><a href="#8-1-何为认证" class="headerlink" title="8.1 何为认证"></a>8.1 何为认证</h4><p>核对的信息通常是以下这些：</p>
<ul>
<li>密码：只有本人才会知道的字符串信息。 </li>
<li>动态令牌：仅限本人持有的设备内显示的一次性密码。 </li>
<li>数字证书：仅限本人（终端）持有的信息。 </li>
<li>生物认证：指纹和虹膜等本人的生理信息。</li>
<li>IC 卡等：仅限本人持有的信息。</li>
</ul>
<p><strong>HTTP 使用的认证方式</strong></p>
<p>HTTP/1.1 使用的认证方式如下所示：</p>
<ul>
<li>BASIC 认证（基本认证） </li>
<li>DIGEST 认证（摘要认证）</li>
<li>SSL 客户端认证 </li>
<li>FormBase 认证（基于表单认证）</li>
</ul>
<h4 id="8-2-BASIC-认证"><a href="#8-2-BASIC-认证" class="headerlink" title="8.2 BASIC 认证"></a>8.2 BASIC 认证</h4><p>BASIC 认证（基本认证）是从 HTTP/1.0 就定义的认证方式。</p>
<p>BASIC 认证虽然采用 Base64 编码方式，但这不是加密处理。不需要任何附加信息即可对其解码。换言之，由于明文解码后就是用户 ID 和密码，在 HTTP 等非加密通信的线路上进行 BASIC 认证的过程中，如果被人窃听，被盗的可能性极高。 </p>
<p>另外，除此之外想再进行一次 BASIC 认证时，一般的浏览器却无法实现认证注销操作，这也是问题之一。</p>
<h4 id="8-3-DIGEST-认证"><a href="#8-3-DIGEST-认证" class="headerlink" title="8.3 DIGEST 认证"></a>8.3 DIGEST 认证</h4><p>为了克服 BASIC 弱点，从 HTTP/1.1 起就有了 DIGEST 认证。</p>
<p>DIGEST 认证提供防止密码被窃听的保护机制，但并不存在防止用户伪装的保护机制。</p>
<h4 id="8-4-SSL-客户端认证"><a href="#8-4-SSL-客户端认证" class="headerlink" title="8.4 SSL 客户端认证"></a>8.4 SSL 客户端认证</h4><h5 id="8-4-1-SSL客户端认证的认证步骤"><a href="#8-4-1-SSL客户端认证的认证步骤" class="headerlink" title="8.4.1 SSL客户端认证的认证步骤"></a>8.4.1 SSL客户端认证的认证步骤</h5><p>步骤 1： 接收到需要认证资源的请求，服务器会发送 Certificate Request 报文，要求客户端提供客户端证书。</p>
<p>步骤 2： 用户选择将发送的客户端证书后，客户端会把客户端证书信息以 Client Certificate 报文方式发送给服务器。</p>
<p>步骤 3： 服务器验证客户端证书验证通过后方可领取证书内客户端的公开密钥，然后开始 HTTPS 加密通信。</p>
<h5 id="8-4-2-SSL-客户端认证采用双因素认证"><a href="#8-4-2-SSL-客户端认证采用双因素认证" class="headerlink" title="8.4.2 SSL 客户端认证采用双因素认证"></a>8.4.2 SSL 客户端认证采用双因素认证</h5><p>第一个认证因素的 SSL客户端证书用来认证客户端计算机， 另一个认证因素的密码则用来确定这是用户本人的行为。</p>
<h5 id="8-4-3-SSL-客户端认证必要的费用"><a href="#8-4-3-SSL-客户端认证必要的费用" class="headerlink" title="8.4.3 SSL 客户端认证必要的费用"></a>8.4.3 SSL 客户端认证必要的费用</h5><h4 id="8-5-基于表单认证"><a href="#8-5-基于表单认证" class="headerlink" title="8.5 基于表单认证"></a>8.5 基于表单认证</h4><p>基于表单的认证方法并不是在 HTTP 协议中定义的。客户端会向服务器上的 Web 应用程序发送登录信息（Credential），按登录信息的验证结果认证。</p>
<h5 id="8-5-1-认证多半为基于表单认证"><a href="#8-5-1-认证多半为基于表单认证" class="headerlink" title="8.5.1 认证多半为基于表单认证"></a>8.5.1 认证多半为基于表单认证</h5><h5 id="8-5-2-Session-管理及-Cookie-应用"><a href="#8-5-2-Session-管理及-Cookie-应用" class="headerlink" title="8.5.2 Session 管理及 Cookie 应用"></a>8.5.2 Session 管理及 Cookie 应用</h5><p>基于表单认证的标准规范尚未有定论，一般会使用 Cookie 来管理 Session（会话）。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/Session管理及Cookie状态管理.png">

<p>你可以把 Session ID 想象成一种用以区分不同用户的等位号。</p>
<h3 id="第-9-章-基于-HTTP-的功能追加协议"><a href="#第-9-章-基于-HTTP-的功能追加协议" class="headerlink" title="第 9 章 基于 HTTP 的功能追加协议"></a>第 9 章 基于 HTTP 的功能追加协议</h3><h4 id="9-1-基于-HTTP-的协议"><a href="#9-1-基于-HTTP-的协议" class="headerlink" title="9.1 基于 HTTP 的协议"></a>9.1 基于 HTTP 的协议</h4><p>HTTP 功能上的不足可通过创建一套全新的协议来弥补。可是目前基于 HTTP 的 Web 浏览器的使用环境已遍布全球，因此无法完全抛弃 HTTP。有一些新协议的规则是基于 HTTP 的，并在此基础上添加了新的功能。</p>
<h4 id="9-2-消除-HTTP-瓶颈的-SPDY"><a href="#9-2-消除-HTTP-瓶颈的-SPDY" class="headerlink" title="9.2 消除 HTTP 瓶颈的 SPDY"></a>9.2 消除 HTTP 瓶颈的 SPDY</h4><p>Google 在 2010 年发布了 SPDY（取自 SPeeDY，发音同 speedy），其开发目标旨在解决 HTTP 的性能瓶颈，缩短 Web 页面的加载时间（50%）。</p>
<h5 id="9-2-1-HTTP-的瓶颈"><a href="#9-2-1-HTTP-的瓶颈" class="headerlink" title="9.2.1 HTTP 的瓶颈"></a>9.2.1 HTTP 的瓶颈</h5><p>若想在现有 Web 实现所需的功能，以下这些 HTTP 标准就会成为瓶颈：</p>
<ul>
<li>一条连接上只可发送一个请求。 </li>
<li>请求只能从客户端开始。客户端不可以接收除响应以外的指令。 </li>
<li>请求 / 响应首部未经压缩就发送。首部信息越多延迟越大。</li>
<li>发送冗长的首部。每次互相发送相同的首部造成的浪费较 多。</li>
<li>可任意选择数据压缩格式。非强制压缩发送。</li>
</ul>
<img src="/blog/2021/10/08/图解HTTP（7-11）/从前的HTTP.png" style="zoom:80%;">

<p><strong>Ajax 的解决方法</strong></p>
<p>Ajax（Asynchronous JavaScript and XML， 异 步 JavaScript 与 XML技术）是一种有效利用 JavaScript 和 DOM（Document Object Model，文档对象模型）的操作，以达到局部 Web 页面替换加载的异步通信手段。</p>
<p><strong>Comet 的解决方法</strong></p>
<p>一旦服务器端有内容更新了，Comet 不会让请求等待，而是直接给客户端返回响应。这是一种通过延迟应答，模拟实现服务器端向客户端推送（Server Push）的功能。</p>
<h5 id="9-2-2-SPDY-的设计与功能"><a href="#9-2-2-SPDY-的设计与功能" class="headerlink" title="9.2.2 SPDY 的设计与功能"></a>9.2.2 SPDY 的设计与功能</h5><p>SPDY 没有完全改写 HTTP 协议，而是在 TCP/IP 的应用层与运输层之间通过<strong>新加会话层</strong>的形式运作。同时，考虑到安全性问题，SPDY 规定通信中使用 SSL。</p>
<p>SPDY 以会话层的形式加入，控制对数据的流动，但还是采用 HTTP 建立通信连接。因此，可照常使用 HTTP 的 GET 和 POST 等方法、 Cookie 以及 HTTP 报文等。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/SPDY.png">

<p>使用 SPDY 后，HTTP 协议额外获得以下功能。</p>
<ul>
<li>多路复用流，单一 TCP 连接可以无限制处理多个 HTTP 请求，提高 TCP 处理效率。</li>
<li>赋予请求优先级，在发送多个请求时，解决因带宽低而导致响应变慢的问题。</li>
<li>压缩 HTTP 请求和响应的头部，通信产生的数据包数量和发送的字节数就更少了。</li>
<li>推送功能，支持服务器主动向客户端推送数据的功能。这样，服务器可直接发送数据，而不必等待客户端的请求。</li>
<li>服务器提示功能，服务器可以主动提示客户端请求所需的资源。</li>
</ul>
<h5 id="9-2-3-SPDY-消除-Web-瓶颈了吗"><a href="#9-2-3-SPDY-消除-Web-瓶颈了吗" class="headerlink" title="9.2.3 SPDY 消除 Web 瓶颈了吗"></a>9.2.3 SPDY 消除 Web 瓶颈了吗</h5><p>因为 SPDY 基本上只是将单个域名（ IP 地址）的通信多路复用，所 以当一个 Web 网站上使用多个域名下的资源，改善效果就会受到限制。</p>
<p>SPDY 的确是一种可有效消除 HTTP 瓶颈的技术，但很多 Web 网站存在的问题并非仅仅是由 HTTP 瓶颈所导致。</p>
<h4 id="9-3-使用浏览器进行全双工通信的-WebSocket"><a href="#9-3-使用浏览器进行全双工通信的-WebSocket" class="headerlink" title="9.3 使用浏览器进行全双工通信的 WebSocket"></a>9.3 使用浏览器进行全双工通信的 WebSocket</h4><p>利用 Ajax 和 Comet 技术进行通信可以提升 Web 的浏览速度。但问题在于通信若使用 HTTP 协议，就无法彻底解决瓶颈问题。WebSocket 网络技术正是为解决这些问题而实现的一套新协议及 API。</p>
<h5 id="9-3-1-WebSocket-的设计与功能"><a href="#9-3-1-WebSocket-的设计与功能" class="headerlink" title="9.3.1 WebSocket 的设计与功能"></a>9.3.1 WebSocket 的设计与功能</h5><p>WebSocket，即 Web 浏览器与 Web 服务器之间全双工通信标准。</p>
<h5 id="9-3-2-WebSocket-协议"><a href="#9-3-2-WebSocket-协议" class="headerlink" title="9.3.2 WebSocket 协议"></a>9.3.2 WebSocket 协议</h5><p>特点：</p>
<ul>
<li><p>推送功能，服务器向客户端推送数据。</p>
</li>
<li><p>减少通信量，只要建立起 WebSocket 连接，就希望一直保持连接状态。和 HTTP 相比，不但每次连接时的总开销减少，而且由于 WebSocket 的首部信息很小，通信量也相应减少了。在 HTTP 连接建立之后，需要完成一 次“握手”（Handshaking）的步骤。</p>
<ul>
<li>握手-请求，为了实现 WebSocket 通信，需要用到 HTTP 的 Upgrade 首部字段，告知服务器通信协议发生改变，以达到握手的目的。</li>
</ul>
<img src="/blog/2021/10/08/图解HTTP（7-11）/websocket1.png">

<ul>
<li>握手-响应，对于之前的请求，返回状态码 101 Switching Protocols 的响应。</li>
</ul>
<img src="/blog/2021/10/08/图解HTTP（7-11）/websocket2.png">

<p>成功握手确立 WebSocket 连接之后，通信时不再使用 HTTP 的数据帧，而采用 WebSocket 独立的数据帧。</p>
<ul>
<li>WebSocket API</li>
</ul>
</li>
</ul>
<h4 id="9-4-期盼已久的-HTTP-2-0"><a href="#9-4-期盼已久的-HTTP-2-0" class="headerlink" title="9.4 期盼已久的 HTTP/2.0"></a>9.4 期盼已久的 HTTP/2.0</h4><p><strong>HTTP/2.0 的 特点</strong></p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/HTTP2.0特点.png">

<h5 id="9-5-Web-服务器管理文件的-WebDAV"><a href="#9-5-Web-服务器管理文件的-WebDAV" class="headerlink" title="9.5 Web 服务器管理文件的 WebDAV"></a>9.5 Web 服务器管理文件的 WebDAV</h5><p>WebDAV（Web-based Distributed Authoring and Versioning，基于万维网的分布式创作和版本控制）是一个可对 Web 服务器上的内容直接进行文件复制、编辑等操作的分布式文件系统。它作为扩展 HTTP/1.1 的协议定义在 RFC4918。</p>
<p>使用 HTTP/1.1 的 PUT 方法和 DELETE 方法，就可以对 Web 服务器上的文件进行创建和删除操作。可是出于安全性及便捷性等考虑，一 般不使用。</p>
<h5 id="9-5-1-扩展-HTTP-1-1-的-WebDAV"><a href="#9-5-1-扩展-HTTP-1-1-的-WebDAV" class="headerlink" title="9.5.1 扩展 HTTP/1.1 的 WebDAV"></a>9.5.1 扩展 HTTP/1.1 的 WebDAV</h5><p>针对服务器上的资源，WebDAV 新增加了一些概念，如下所示：</p>
<ul>
<li>集合：是一种统一管理多个资源的概念。</li>
<li>资源：把文件或集合称为资源。</li>
<li>属性：定义资源的属性。格式为“名称=值”。</li>
<li>锁：把文件设置成无法编辑状态。</li>
</ul>
<h5 id="9-5-2-WebDAV-内新增的方法及状态码"><a href="#9-5-2-WebDAV-内新增的方法及状态码" class="headerlink" title="9.5.2 WebDAV 内新增的方法及状态码"></a>9.5.2 WebDAV 内新增的方法及状态码</h5><p>WebDAV 为实现远程文件管理，向 HTTP/1.1 中追加了以下这些方法。</p>
<ul>
<li>PROPFIND ：获取属性</li>
<li>PROPPATCH ：修改属性 </li>
<li>MKCOL ：创建集合 </li>
<li>COPY ：复制资源及属性 </li>
<li>MOVE ：移动资源 </li>
<li>LOCK ：资源加锁 </li>
<li>UNLOCK ：资源解锁</li>
</ul>
<p>为配合扩展的方法，状态码也随之扩展。</p>
<ul>
<li>102 Processing ：可正常处理请求，但目前是处理中状态 </li>
<li>207 Multi-Status ：存在多种状态 </li>
<li>422 Unprocessible Entity ：格式正确，内容有误 </li>
<li>423 Locked ：资源已被加锁 </li>
<li>424 Failed Dependency ：处理与某请求关联的请求失败，因此不再维持依赖关系 </li>
<li>507 Insufficient Storage ：保存空间不足</li>
</ul>
<h3 id="第-10-章-构建-Web-内容的技术"><a href="#第-10-章-构建-Web-内容的技术" class="headerlink" title="第 10 章 构建 Web 内容的技术"></a>第 10 章 构建 Web 内容的技术</h3><h4 id="10-1-HTML"><a href="#10-1-HTML" class="headerlink" title="10.1 HTML"></a>10.1 HTML</h4><h5 id="10-1-1-Web-页面几乎全由-HTML-构建"><a href="#10-1-1-Web-页面几乎全由-HTML-构建" class="headerlink" title="10.1.1 Web 页面几乎全由 HTML 构建"></a>10.1.1 Web 页面几乎全由 HTML 构建</h5><p>HTML（HyperText Markup Language，超文本标记语言）是为了发送 Web 上的超文本（Hypertext）而开发的标记语言。</p>
<h5 id="10-1-2-HTML-的版本"><a href="#10-1-2-HTML-的版本" class="headerlink" title="10.1.2 HTML 的版本"></a>10.1.2 HTML 的版本</h5><p>目前的最新版本是 HTML4.01 标准，1999 年 12 月 W3C（World Wide Web Consortium）组织推荐使用这一版本。下一个版本，预计会在 2014 年左右正式推荐使用 HTML5 标准。</p>
<p>HTML5 标准不仅解决了浏览器之间的兼容性问题，并且可把文本作为数据对待，更容易复用，动画等效果也变得更生动。</p>
<h5 id="10-1-3-设计应用-CSS"><a href="#10-1-3-设计应用-CSS" class="headerlink" title="10.1.3 设计应用 CSS"></a>10.1.3 设计应用 CSS</h5><p>CSS（Cascading Style Sheets，层叠样式表）可以指定如何展现 HTML 内的各种元素，属于样式表标准之一。即使是相同的 HTML 文档， 通过改变应用的 CSS，用浏览器看到的页面外观也会随之改变。CSS 的理念就是让文档的结构和设计分离，达到解耦的目的。</p>
<h4 id="10-2-动态-HTML"><a href="#10-2-动态-HTML" class="headerlink" title="10.2 动态 HTML"></a>10.2 动态 HTML</h4><h5 id="10-2-1-让-Web-页面动起来的动态-HTML"><a href="#10-2-1-让-Web-页面动起来的动态-HTML" class="headerlink" title="10.2.1 让 Web 页面动起来的动态 HTML"></a>10.2.1 让 Web 页面动起来的动态 HTML</h5><p>动态 HTML技术是通过调用客户端脚本语言 JavaScript，实现对 HTML 的 Web 页面的动态改造。利用 DOM（Document Object Model，文档对象模型）可指定欲发生动态变化的 HTML 元素。</p>
<h5 id="10-2-2-更易控制-HTML-的-DOM"><a href="#10-2-2-更易控制-HTML-的-DOM" class="headerlink" title="10.2.2 更易控制 HTML 的 DOM"></a>10.2.2 更易控制 HTML 的 DOM</h5><p>DOM 是用以操作 HTML 文档和 XML 文档的 API（Application Programming Interface，应用编程接口）。使用 DOM 可以将 HTML 内的元素当作对象操作，如取出元素内的字符串、改变那个 CSS 的属性等，使页面的设计发生改变。</p>
<h4 id="10-3-Web-应用"><a href="#10-3-Web-应用" class="headerlink" title="10.3 Web 应用"></a>10.3 Web 应用</h4><h5 id="10-3-1-通过-web-提供功能的-Web-应用"><a href="#10-3-1-通过-web-提供功能的-Web-应用" class="headerlink" title="10.3.1 通过 web 提供功能的 Web 应用"></a>10.3.1 通过 web 提供功能的 Web 应用</h5><p>原本应用 HTTP 协议的 Web 的机制就是对客户端发来的请求，返回事前准备好的内容。随着 Web 越来越普及，仅靠这样的做法已不足以应对所有的需求。</p>
<p>引入由程序创建 HTML 内容的做法，称为动态内容，而事先准备好的内容称为静态内容。web应用则作用于动态内容之上。</p>
<h5 id="10-3-2-与-Web-服务器及程序协作的-CGI※"><a href="#10-3-2-与-Web-服务器及程序协作的-CGI※" class="headerlink" title="10.3.2 与 Web 服务器及程序协作的 CGI※"></a>10.3.2 与 Web 服务器及程序协作的 CGI※</h5><p>CGI（Common Gateway Interface，通用网关接口）是指 Web 服务器在接收到客户端发送过来的请求后转发给程序的一组机制。在 CGI 的作用下，程序会对请求内容做出相应的动作，比如创建 HTML 等动态内容。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/CGI.png">

<h5 id="10-3-3-因-JAVA-而普及的-Servlet"><a href="#10-3-3-因-JAVA-而普及的-Servlet" class="headerlink" title="10.3.3 因 JAVA 而普及的 Servlet"></a>10.3.3 因 JAVA 而普及的 Servlet</h5><p>之前提及的 CGI，由于每次接到请求，程序都要跟着启动一次。因此一旦访问量过大，Web 服务器要承担相当大的负载。而 Servlet 运行在与 Web 服务器相同的进程中，因此受到的负载较小 2。Servlet 的运行环境叫做 Web 容器或 Servlet 容器。</p>
<h4 id="10-4-数据发布的格式及语言"><a href="#10-4-数据发布的格式及语言" class="headerlink" title="10.4 数据发布的格式及语言"></a>10.4 数据发布的格式及语言</h4><h5 id="10-4-1-可扩展标记语言"><a href="#10-4-1-可扩展标记语言" class="headerlink" title="10.4.1 可扩展标记语言"></a>10.4.1 可扩展标记语言</h5><p>XML（eXtensible Markup Language，可扩展标记语言）是一种可按应用目标进行扩展的通用标记语言。旨在通过使用 XML，使互联网数据共享变得更容易。 XML和 HTML都是从标准通用标记语言 SGML（Standard Generalized Markup Language）简化而成。与 HTML相比，它对数据的记录方式做了特殊处理。</p>
<h5 id="10-4-2-发布更新信息的-RSS-Atom"><a href="#10-4-2-发布更新信息的-RSS-Atom" class="headerlink" title="10.4.2 发布更新信息的 RSS/Atom"></a>10.4.2 发布更新信息的 RSS/Atom</h5><p>RSS（简易信息聚合，也叫聚合内容）和 Atom 都是发布新闻或博客日志等更新信息文档的格式的总称。两者都用到了 XML。</p>
<h5 id="10-4-3-JavaScript-衍生的轻量级易用-JSON"><a href="#10-4-3-JavaScript-衍生的轻量级易用-JSON" class="headerlink" title="10.4.3 JavaScript 衍生的轻量级易用 JSON"></a>10.4.3 JavaScript 衍生的轻量级易用 JSON</h5><p>JSON（JavaScript Object Notation）是一种以 JavaScript（ECMAScript）的对象表示法为基础的轻量级数据标记语言。能够处理的数据类型有 false/null/true/ 对象 / 数组 / 数字 / 字符 串，这 7 种类型。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/JSON.png">

<p>JSON 让数据更轻更纯粹，并且 JSON 的字符串形式可被 JavaScript 轻易地读入。</p>
<h3 id="第-11-章-Web-的攻击技术"><a href="#第-11-章-Web-的攻击技术" class="headerlink" title="第 11 章 Web 的攻击技术"></a>第 11 章 Web 的攻击技术</h3><h4 id="11-1-针对-Web-的攻击技术"><a href="#11-1-针对-Web-的攻击技术" class="headerlink" title="11.1 针对 Web 的攻击技术"></a>11.1 针对 Web 的攻击技术</h4><h5 id="11-1-1-HTTP-不具备必要的安全功能"><a href="#11-1-1-HTTP-不具备必要的安全功能" class="headerlink" title="11.1.1 HTTP 不具备必要的安全功能"></a>11.1.1 HTTP 不具备必要的安全功能</h5><h5 id="11-1-2-在客户端即可篡改请求"><a href="#11-1-2-在客户端即可篡改请求" class="headerlink" title="11.1.2 在客户端即可篡改请求"></a>11.1.2 在客户端即可篡改请求</h5><h5 id="11-1-3-针对-Web-应用的攻击模式"><a href="#11-1-3-针对-Web-应用的攻击模式" class="headerlink" title="11.1.3 针对 Web 应用的攻击模式"></a>11.1.3 针对 Web 应用的攻击模式</h5><p>对 Web 应用的攻击模式有以下两种。</p>
<ul>
<li>主动攻击</li>
<li>被动攻击</li>
</ul>
<p><strong>以服务器为目标的主动攻击</strong></p>
<p>主动攻击模式里具有代表性的攻击是 SQL注入攻击和 OS 命令注入攻击。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/主动攻击.png">

<p><strong>以服务器为目标的被动攻击</strong></p>
<p>被动攻击模式中具有代表性的攻击是跨站脚本攻击和跨站点请求伪造。</p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/被动攻击.png" style="zoom:120%;">

<p><strong>利用用户的身份攻击企业内部网络（被动攻击）</strong></p>
<img src="/blog/2021/10/08/图解HTTP（7-11）/被动攻击2.png">

<h4 id="11-2-因输出值转义不完全引发的安全漏洞"><a href="#11-2-因输出值转义不完全引发的安全漏洞" class="headerlink" title="11.2 因输出值转义不完全引发的安全漏洞"></a>11.2 因输出值转义不完全引发的安全漏洞</h4><p>实施 Web 应用的安全对策大致分为以下两种：</p>
<ul>
<li>客户端的验证</li>
<li>Web 应用端（服务器端）的验证<ul>
<li>输入值验证</li>
<li>输出值转义</li>
</ul>
</li>
</ul>
<img src="/blog/2021/10/08/图解HTTP（7-11）/验证数据的几个位置.png">

<p>从数据库或文件系统、HTML、邮件等输出 Web 应用处理的数据之际，针对输出做值转义处理是一项至关重要的安全策略。当输出值转义不完全时，会因触发攻击者传入的攻击代码，而给输出对象带来损害。</p>
<h5 id="11-2-1-跨站脚本攻击"><a href="#11-2-1-跨站脚本攻击" class="headerlink" title="11.2.1 跨站脚本攻击"></a>11.2.1 跨站脚本攻击</h5><p>跨站脚本攻击（Cross-Site Scripting，XSS）是指通过存在安全漏洞的 Web 网站注册用户的浏览器内运行非法的 HTML 标签或 JavaScript 进行的一种攻击。动态创建的 HTML 部分有可能隐藏着安全漏洞。就这样，攻击者编写脚本设下陷阱，用户在自己的浏览器上运行时，一不小心就会受到被动攻击。</p>
<p>跨站脚本攻击有可能造成以下影响。：</p>
<ul>
<li>利用虚假输入表单骗取用户个人信息。 </li>
<li>利用脚本窃取用户的 Cookie 值，被害者在不知情的情况下， 帮助攻击者发送恶意请求。 </li>
<li>显示伪造的文章或图片。</li>
</ul>
<h5 id="11-2-2-SQL-注入攻击"><a href="#11-2-2-SQL-注入攻击" class="headerlink" title="11.2.2 SQL 注入攻击"></a>11.2.2 SQL 注入攻击</h5><p><strong>会执行非法 SQL 的 SQL 注入攻击</strong></p>
<p>SQL注入攻击有可能会造成以下等影响：</p>
<ul>
<li>非法查看或篡改数据库内的数据 </li>
<li>规避认证 </li>
<li>执行和数据库服务器业务关联的程序等</li>
</ul>
<p><strong>SQL 注入攻击案例</strong></p>
<p>P211</p>
<h5 id="11-2-3-OS-命令注入攻击"><a href="#11-2-3-OS-命令注入攻击" class="headerlink" title="11.2.3 OS 命令注入攻击"></a>11.2.3 OS 命令注入攻击</h5><p>OS 命令注入攻击（OS Command Injection）是指通过 Web 应用，执行非法的操作系统命令达到攻击的目的。只要在能调用 Shell 函数的地方就有存在被攻击的风险。</p>
<h5 id="11-2-4-HTTP-首部注入攻击"><a href="#11-2-4-HTTP-首部注入攻击" class="headerlink" title="11.2.4 HTTP 首部注入攻击"></a>11.2.4 HTTP 首部注入攻击</h5><p>HTTP 首部注入攻击（HTTP Header Injection）是指攻击者通过在响应首部字段内插入换行，添加任意响应首部或主体的一种攻击。属于被动攻击模式。</p>
<p>HTTP 首部注入攻击有可能会造成以下一些影响：</p>
<ul>
<li>设置任何 Cookie 信息 </li>
<li>重定向至任意 URL </li>
<li>显示任意的主体（HTTP 响应截断攻击）</li>
</ul>
<p><strong>HTTP 响应截断攻击</strong></p>
<p>HTTP 响应截断攻击是用在 HTTP 首部注入的一种攻击。攻击顺 相同，但是要将两个 %0D%0A%0D%0A 并排插入字符串后发送。利用这两个连续的换行就可作出 HTTP 首部与主体分隔所需的空行了，这样就能显示伪造的主体，达到攻击目的。这样的攻击叫做 HTTP 响应截断攻击。</p>
<h5 id="11-2-5-邮件首部注入攻击"><a href="#11-2-5-邮件首部注入攻击" class="headerlink" title="11.2.5 邮件首部注入攻击"></a>11.2.5 邮件首部注入攻击</h5><p>邮件首部注入（Mail Header Injection）是指 Web 应用中的邮件发送功能，攻击者通过向邮件首部 To 或 Subject 内任意添加非法内容发起的攻击。利用存在安全漏洞的 Web 网站，可对任意邮件地址发送广告邮件或病毒邮件。</p>
<h5 id="11-2-6-目录遍历攻击"><a href="#11-2-6-目录遍历攻击" class="headerlink" title="11.2.6 目录遍历攻击"></a>11.2.6 目录遍历攻击</h5><p>目录遍历（Directory Traversal）攻击是指对本<strong>无意公开</strong>的文件目录， 通过非法截断其目录路径后，达成访问目的的一种攻击。这种攻击有时也称为路径遍历（Path Traversal）攻击。</p>
<h5 id="11-2-7-远程文件包含漏洞"><a href="#11-2-7-远程文件包含漏洞" class="headerlink" title="11.2.7 远程文件包含漏洞"></a>11.2.7 远程文件包含漏洞</h5><p>远程文件包含漏洞（Remote File Inclusion）是指当部分脚本内容需要从其他文件读入时，攻击者利用指定外部服务器的 URL 充当依赖文 件，让脚本读取之后，就可运行任意脚本的一种攻击。</p>
<h4 id="11-3-因设置或设计上的缺陷引发的安全漏洞"><a href="#11-3-因设置或设计上的缺陷引发的安全漏洞" class="headerlink" title="11.3 因设置或设计上的缺陷引发的安全漏洞"></a>11.3 因设置或设计上的缺陷引发的安全漏洞</h4><h5 id="11-3-1-强制浏览"><a href="#11-3-1-强制浏览" class="headerlink" title="11.3.1 强制浏览"></a>11.3.1 强制浏览</h5><p>强制浏览（Forced Browsing）安全漏洞是指，从安置在 Web 服务器的公开目录下的文件中，浏览那些原本非自愿公开的文件。</p>
<p>强制浏览有可能会造成以下一些影响：</p>
<ul>
<li>泄露顾客的个人信息等重要情报</li>
<li>泄露原本需要具有访问权限的用户才可查阅的信息内容 </li>
<li>泄露未外连到外界的文件</li>
</ul>
<h5 id="11-3-2-不正确的错误消息处理"><a href="#11-3-2-不正确的错误消息处理" class="headerlink" title="11.3.2 不正确的错误消息处理"></a>11.3.2 不正确的错误消息处理</h5><p>不正确的错误消息处理（Error Handling Vulnerability）的安全漏洞是指，Web 应用的错误信息内包含对攻击者有用的信息。与 Web 应用有关的主要错误信息如下所示。</p>
<ul>
<li>Web 应用抛出的错误消息 </li>
<li>数据库等系统抛出的错误消息</li>
</ul>
<h5 id="11-3-3-开放重定向"><a href="#11-3-3-开放重定向" class="headerlink" title="11.3.3 开放重定向"></a>11.3.3 开放重定向</h5><p>开放重定向（Open Redirect）是一种对指定的任意 URL作重定向跳转的功能。而于此功能相关联的安全漏洞是指，假如指定的重定向 URL 到某个具有恶意的 Web 网站，那么用户就会被诱导至那个 Web 网站。</p>
<h4 id="11-4-因会话管理疏忽引发的安全漏洞"><a href="#11-4-因会话管理疏忽引发的安全漏洞" class="headerlink" title="11.4 因会话管理疏忽引发的安全漏洞"></a>11.4 因会话管理疏忽引发的安全漏洞</h4><h5 id="11-4-1-会话劫持"><a href="#11-4-1-会话劫持" class="headerlink" title="11.4.1 会话劫持"></a>11.4.1 会话劫持</h5><p>会话劫持（Session Hijack）是指攻击者通过某种手段拿到了用户的会话 ID，并非法使用此会话 ID 伪装成用户，达到攻击的目的。</p>
<p>下面列举了几种攻击者可获得会话 ID 的途径：</p>
<ul>
<li>通过非正规的生成方法推测会话 ID </li>
<li>通过窃听或 XSS 攻击盗取会话 ID </li>
<li>通过会话固定攻击（Session Fixation）强行获取会话 ID</li>
</ul>
<h5 id="11-4-2-会话固定攻击"><a href="#11-4-2-会话固定攻击" class="headerlink" title="11.4.2 会话固定攻击"></a>11.4.2 会话固定攻击</h5><p>对以窃取目标会话 ID 为主动攻击手段的会话劫持而言，会话固定攻击（Session Fixation）攻击会强制用户使用攻击者指定的会话 ID，属于被动攻击。</p>
<h5 id="11-4-3-跨站点请求伪造"><a href="#11-4-3-跨站点请求伪造" class="headerlink" title="11.4.3 跨站点请求伪造"></a>11.4.3 跨站点请求伪造</h5><p>跨站点请求伪造（Cross-Site Request Forgeries，CSRF）攻击是指攻击者通过设置好的陷阱，强制对已完成认证的用户进行非预期的个人信息或设定信息等某些状态更新，属于被动攻击。</p>
<p>跨站点请求伪造有可能会造成以下等影响：</p>
<ul>
<li>利用已通过认证的用户权限更新设定信息等 </li>
<li>利用已通过认证的用户权限购买商品 </li>
<li>利用已通过认证的用户权限在留言板上发表言论</li>
</ul>
<h4 id="11-5-其他安全漏洞"><a href="#11-5-其他安全漏洞" class="headerlink" title="11.5 其他安全漏洞"></a>11.5 其他安全漏洞</h4><h5 id="11-5-1-密码破解"><a href="#11-5-1-密码破解" class="headerlink" title="11.5.1 密码破解"></a>11.5.1 密码破解</h5><p>密码破解攻击（Password Cracking）即算出密码，突破认证。攻击不仅限于 Web 应用，还包括其他的系统（如 FTP 或 SSH 等），本节将会讲解对具备认证功能的 Web 应用进行的密码破解。</p>
<p>密码破解有以下两种手段。 </p>
<ul>
<li>通过网络的密码试错 <ul>
<li>穷举法</li>
<li>字典攻击</li>
</ul>
</li>
<li>对已加密密码的破解（指攻击者入侵系统，已获得加密或散列处理的密码数据的情况）</li>
</ul>
<h5 id="11-5-2-点击劫持"><a href="#11-5-2-点击劫持" class="headerlink" title="11.5.2 点击劫持"></a>11.5.2 点击劫持</h5><p>点击劫持（Clickjacking）是指利用透明的按钮或链接做成陷阱，覆盖 在 Web 页面之上。然后诱使用户在不知情的情况下，点击那个链接访问内容的一种攻击手段。这种行为又称为界面伪装（UI Redressing）。</p>
<h5 id="11-5-3-Dos-攻击"><a href="#11-5-3-Dos-攻击" class="headerlink" title="11.5.3 Dos 攻击"></a>11.5.3 Dos 攻击</h5><p>DoS 攻击（Denial of Service attack）是一种让运行中的服务呈停止状态的攻击。有时也叫做服务停止攻击或拒绝服务攻击。DoS 攻击的对象不仅限于 Web 网站，还包括网络设备及服务器等。</p>
<p>主要有以下两种 Dos 攻击方式：</p>
<ul>
<li>集中利用访问请求造成资源过载，资源用尽的同时，实际上服务也就呈通知状态</li>
<li>通过攻击安全漏洞使服务停止</li>
</ul>
<p>多台计算机发起的 DoS 攻击称为 DDoS 攻击（Distributed Denial of Service attack）。DDoS 攻击通常利用那些感染病毒的计算机作为攻 击者的攻击跳板。</p>
<h5 id="11-5-4-后门程序"><a href="#11-5-4-后门程序" class="headerlink" title="11.5.4 后门程序"></a>11.5.4 后门程序</h5><p>后门程序（Backdoor）是指开发设置的隐藏入口，可不按正常步骤使用受限功能。利用后门程序就能够使用原本受限制的功能。</p>
<p>通常的后门程序分为以下 3 种类型。 </p>
<ul>
<li>开发阶段作为 Debug 调用的后门程序 </li>
<li>开发者为了自身利益植入的后门程序 </li>
<li>攻击者通过某种方法设置的后门程序</li>
</ul>

      
    </div>
    
    
    

    

    

    
 
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------感谢阅读-------------</div>
    
</div>
  
</div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/HTTP/" rel="tag"># HTTP</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2021/10/08/图解HTTP（1-6）/" rel="next" title="图解HTTP（1-6）">
                <i class="fa fa-chevron-left"></i> 图解HTTP（1-6）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2021/10/08/设计模式/" rel="prev" title="设计模式">
                设计模式 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Zxy</p>
              <p class="site-description motion-element" itemprop="description">磨刀不误砍柴工</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">157</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zxy543040659" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:543040659@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.csdn.net" title="CSDN" target="_blank">CSDN</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://leetcode-cn.com/u/zxy-70/" title="LeetCode" target="_blank">LeetCode</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.nowcoder.com" title="牛客网" target="_blank">牛客网</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#第-7-章-确保-Web-安全的-HTTPS"><span class="nav-number">1.</span> <span class="nav-text">第 7 章 确保 Web 安全的 HTTPS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-HTTP-的缺点"><span class="nav-number">1.1.</span> <span class="nav-text">7.1 HTTP 的缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-1-通信使用明文可能会被窃听"><span class="nav-number">1.1.1.</span> <span class="nav-text">7.1.1 通信使用明文可能会被窃听</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-2-不验证通信方的身份就可能遭遇伪装"><span class="nav-number">1.1.2.</span> <span class="nav-text">7.1.2 不验证通信方的身份就可能遭遇伪装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-3-无法证明报文完整性，可能已遭篡改"><span class="nav-number">1.1.3.</span> <span class="nav-text">7.1.3 无法证明报文完整性，可能已遭篡改</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-HTTP-加密-认证-完整性保护-HTTPS"><span class="nav-number">1.2.</span> <span class="nav-text">7.2 HTTP+加密+认证+完整性保护=HTTPS</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-1-HTTP-加上加密处理和认证以及完整性保护后即是-HTTPS"><span class="nav-number">1.2.1.</span> <span class="nav-text">7.2.1 HTTP 加上加密处理和认证以及完整性保护后即是 HTTPS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-2-HTTPS-是身披-SSL-外壳的-HTTP"><span class="nav-number">1.2.2.</span> <span class="nav-text">7.2.2 HTTPS 是身披 SSL 外壳的 HTTP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-3-相互交换密钥的公开密钥加密技术"><span class="nav-number">1.2.3.</span> <span class="nav-text">7.2.3 相互交换密钥的公开密钥加密技术</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-4-证明公开密钥正确性的证书"><span class="nav-number">1.2.4.</span> <span class="nav-text">7.2.4 证明公开密钥正确性的证书</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-5-HTTPS-的安全通信机制"><span class="nav-number">1.2.5.</span> <span class="nav-text">7.2.5 HTTPS 的安全通信机制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第-8-章-确认访问用户身份的认证"><span class="nav-number">2.</span> <span class="nav-text">第 8 章 确认访问用户身份的认证</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-何为认证"><span class="nav-number">2.1.</span> <span class="nav-text">8.1 何为认证</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2-BASIC-认证"><span class="nav-number">2.2.</span> <span class="nav-text">8.2 BASIC 认证</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-3-DIGEST-认证"><span class="nav-number">2.3.</span> <span class="nav-text">8.3 DIGEST 认证</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-4-SSL-客户端认证"><span class="nav-number">2.4.</span> <span class="nav-text">8.4 SSL 客户端认证</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-4-1-SSL客户端认证的认证步骤"><span class="nav-number">2.4.1.</span> <span class="nav-text">8.4.1 SSL客户端认证的认证步骤</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-4-2-SSL-客户端认证采用双因素认证"><span class="nav-number">2.4.2.</span> <span class="nav-text">8.4.2 SSL 客户端认证采用双因素认证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-4-3-SSL-客户端认证必要的费用"><span class="nav-number">2.4.3.</span> <span class="nav-text">8.4.3 SSL 客户端认证必要的费用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-5-基于表单认证"><span class="nav-number">2.5.</span> <span class="nav-text">8.5 基于表单认证</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-5-1-认证多半为基于表单认证"><span class="nav-number">2.5.1.</span> <span class="nav-text">8.5.1 认证多半为基于表单认证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-5-2-Session-管理及-Cookie-应用"><span class="nav-number">2.5.2.</span> <span class="nav-text">8.5.2 Session 管理及 Cookie 应用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第-9-章-基于-HTTP-的功能追加协议"><span class="nav-number">3.</span> <span class="nav-text">第 9 章 基于 HTTP 的功能追加协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-1-基于-HTTP-的协议"><span class="nav-number">3.1.</span> <span class="nav-text">9.1 基于 HTTP 的协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-消除-HTTP-瓶颈的-SPDY"><span class="nav-number">3.2.</span> <span class="nav-text">9.2 消除 HTTP 瓶颈的 SPDY</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#9-2-1-HTTP-的瓶颈"><span class="nav-number">3.2.1.</span> <span class="nav-text">9.2.1 HTTP 的瓶颈</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-2-2-SPDY-的设计与功能"><span class="nav-number">3.2.2.</span> <span class="nav-text">9.2.2 SPDY 的设计与功能</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-2-3-SPDY-消除-Web-瓶颈了吗"><span class="nav-number">3.2.3.</span> <span class="nav-text">9.2.3 SPDY 消除 Web 瓶颈了吗</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-使用浏览器进行全双工通信的-WebSocket"><span class="nav-number">3.3.</span> <span class="nav-text">9.3 使用浏览器进行全双工通信的 WebSocket</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#9-3-1-WebSocket-的设计与功能"><span class="nav-number">3.3.1.</span> <span class="nav-text">9.3.1 WebSocket 的设计与功能</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-3-2-WebSocket-协议"><span class="nav-number">3.3.2.</span> <span class="nav-text">9.3.2 WebSocket 协议</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-4-期盼已久的-HTTP-2-0"><span class="nav-number">3.4.</span> <span class="nav-text">9.4 期盼已久的 HTTP/2.0</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#9-5-Web-服务器管理文件的-WebDAV"><span class="nav-number">3.4.1.</span> <span class="nav-text">9.5 Web 服务器管理文件的 WebDAV</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-5-1-扩展-HTTP-1-1-的-WebDAV"><span class="nav-number">3.4.2.</span> <span class="nav-text">9.5.1 扩展 HTTP/1.1 的 WebDAV</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-5-2-WebDAV-内新增的方法及状态码"><span class="nav-number">3.4.3.</span> <span class="nav-text">9.5.2 WebDAV 内新增的方法及状态码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第-10-章-构建-Web-内容的技术"><span class="nav-number">4.</span> <span class="nav-text">第 10 章 构建 Web 内容的技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-HTML"><span class="nav-number">4.1.</span> <span class="nav-text">10.1 HTML</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#10-1-1-Web-页面几乎全由-HTML-构建"><span class="nav-number">4.1.1.</span> <span class="nav-text">10.1.1 Web 页面几乎全由 HTML 构建</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-1-2-HTML-的版本"><span class="nav-number">4.1.2.</span> <span class="nav-text">10.1.2 HTML 的版本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-1-3-设计应用-CSS"><span class="nav-number">4.1.3.</span> <span class="nav-text">10.1.3 设计应用 CSS</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-动态-HTML"><span class="nav-number">4.2.</span> <span class="nav-text">10.2 动态 HTML</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#10-2-1-让-Web-页面动起来的动态-HTML"><span class="nav-number">4.2.1.</span> <span class="nav-text">10.2.1 让 Web 页面动起来的动态 HTML</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-2-2-更易控制-HTML-的-DOM"><span class="nav-number">4.2.2.</span> <span class="nav-text">10.2.2 更易控制 HTML 的 DOM</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-3-Web-应用"><span class="nav-number">4.3.</span> <span class="nav-text">10.3 Web 应用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#10-3-1-通过-web-提供功能的-Web-应用"><span class="nav-number">4.3.1.</span> <span class="nav-text">10.3.1 通过 web 提供功能的 Web 应用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-3-2-与-Web-服务器及程序协作的-CGI※"><span class="nav-number">4.3.2.</span> <span class="nav-text">10.3.2 与 Web 服务器及程序协作的 CGI※</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-3-3-因-JAVA-而普及的-Servlet"><span class="nav-number">4.3.3.</span> <span class="nav-text">10.3.3 因 JAVA 而普及的 Servlet</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-4-数据发布的格式及语言"><span class="nav-number">4.4.</span> <span class="nav-text">10.4 数据发布的格式及语言</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#10-4-1-可扩展标记语言"><span class="nav-number">4.4.1.</span> <span class="nav-text">10.4.1 可扩展标记语言</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-4-2-发布更新信息的-RSS-Atom"><span class="nav-number">4.4.2.</span> <span class="nav-text">10.4.2 发布更新信息的 RSS/Atom</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-4-3-JavaScript-衍生的轻量级易用-JSON"><span class="nav-number">4.4.3.</span> <span class="nav-text">10.4.3 JavaScript 衍生的轻量级易用 JSON</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第-11-章-Web-的攻击技术"><span class="nav-number">5.</span> <span class="nav-text">第 11 章 Web 的攻击技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-针对-Web-的攻击技术"><span class="nav-number">5.1.</span> <span class="nav-text">11.1 针对 Web 的攻击技术</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#11-1-1-HTTP-不具备必要的安全功能"><span class="nav-number">5.1.1.</span> <span class="nav-text">11.1.1 HTTP 不具备必要的安全功能</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-1-2-在客户端即可篡改请求"><span class="nav-number">5.1.2.</span> <span class="nav-text">11.1.2 在客户端即可篡改请求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-1-3-针对-Web-应用的攻击模式"><span class="nav-number">5.1.3.</span> <span class="nav-text">11.1.3 针对 Web 应用的攻击模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-2-因输出值转义不完全引发的安全漏洞"><span class="nav-number">5.2.</span> <span class="nav-text">11.2 因输出值转义不完全引发的安全漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-1-跨站脚本攻击"><span class="nav-number">5.2.1.</span> <span class="nav-text">11.2.1 跨站脚本攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-2-SQL-注入攻击"><span class="nav-number">5.2.2.</span> <span class="nav-text">11.2.2 SQL 注入攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-3-OS-命令注入攻击"><span class="nav-number">5.2.3.</span> <span class="nav-text">11.2.3 OS 命令注入攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-4-HTTP-首部注入攻击"><span class="nav-number">5.2.4.</span> <span class="nav-text">11.2.4 HTTP 首部注入攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-5-邮件首部注入攻击"><span class="nav-number">5.2.5.</span> <span class="nav-text">11.2.5 邮件首部注入攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-6-目录遍历攻击"><span class="nav-number">5.2.6.</span> <span class="nav-text">11.2.6 目录遍历攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-7-远程文件包含漏洞"><span class="nav-number">5.2.7.</span> <span class="nav-text">11.2.7 远程文件包含漏洞</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-3-因设置或设计上的缺陷引发的安全漏洞"><span class="nav-number">5.3.</span> <span class="nav-text">11.3 因设置或设计上的缺陷引发的安全漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#11-3-1-强制浏览"><span class="nav-number">5.3.1.</span> <span class="nav-text">11.3.1 强制浏览</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-3-2-不正确的错误消息处理"><span class="nav-number">5.3.2.</span> <span class="nav-text">11.3.2 不正确的错误消息处理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-3-3-开放重定向"><span class="nav-number">5.3.3.</span> <span class="nav-text">11.3.3 开放重定向</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-4-因会话管理疏忽引发的安全漏洞"><span class="nav-number">5.4.</span> <span class="nav-text">11.4 因会话管理疏忽引发的安全漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#11-4-1-会话劫持"><span class="nav-number">5.4.1.</span> <span class="nav-text">11.4.1 会话劫持</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-4-2-会话固定攻击"><span class="nav-number">5.4.2.</span> <span class="nav-text">11.4.2 会话固定攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-4-3-跨站点请求伪造"><span class="nav-number">5.4.3.</span> <span class="nav-text">11.4.3 跨站点请求伪造</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-5-其他安全漏洞"><span class="nav-number">5.5.</span> <span class="nav-text">11.5 其他安全漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#11-5-1-密码破解"><span class="nav-number">5.5.1.</span> <span class="nav-text">11.5.1 密码破解</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-5-2-点击劫持"><span class="nav-number">5.5.2.</span> <span class="nav-text">11.5.2 点击劫持</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-5-3-Dos-攻击"><span class="nav-number">5.5.3.</span> <span class="nav-text">11.5.3 Dos 攻击</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-5-4-后门程序"><span class="nav-number">5.5.4.</span> <span class="nav-text">11.5.4 后门程序</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zxy</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">211.6k</span>
  
</div>










  <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");
    }
  </script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'AdpVtSThS6jOJrm9IY1KbAhh-gzGzoHsz',
        appKey: 'TfWIAg9fK7NHRzdEdwNazYD9',
        placeholder: '输入中...',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  

  

</body>
</html>
